function random(n,t){var i=t-n;return Math.random()*i+n}function cap(n,t,i){return Math.max(n,Math.min(i,t))}var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},deg45=Math.PI/4,Quadrant=function(){function n(n){this.angle=n}return n.Tools=new n(1*deg45),n.Techniques=new n(3*deg45),n.Platforms=new n(-3*deg45),n.Languages=new n(-1*deg45),n.prototype.angleLower=function(){return this.angle-deg45},n.prototype.angleUpper=function(){return this.angle+deg45},n}(),D3Node=function(){function n(n,t){this.x=n,this.y=t}return n}(),D3Link=function(){function n(n,t){this.source=n,this.target=t}return n}(),Thing=function(n){function t(t,i,r,u){n.call(this,null,null),this.name=t,this.quadrant=i,this.scale=u;var f=r*u,e=random(i.angleLower(),i.angleUpper());this.polar=new Polar(f,e),this.updateXY()}return __extends(t,n),t.prototype.updatePolar=function(){this.prevPolar=this.polar,this.polar=Polar.fromPoint(this.x,this.y)},t.prototype.fixRadius=function(){this.isBeingDragged()||(this.polar.r=this.prevPolar.r)},t.prototype.updateXY=function(){this.x=this.polar.x(),this.y=this.polar.y()},t.prototype.isBeingDragged=function(){return this.fixed&2},t.prototype.goodness=function(){return this.polar.r/this.scale},t}(D3Node),Polar=function(){function n(n,t){this.r=n,this.phi=t}return n.fromPoint=function(t,i){return i=-i,new n(Math.sqrt(t*t+i*i),Math.atan2(i,t))},n.prototype.x=function(){return this.r*Math.cos(this.phi)},n.prototype.y=function(){return-this.r*Math.sin(this.phi)},n}(),Viewport=function(){function n(n){this.width=n;var t=this;this.quadrantGravity=.05,this.svg=d3.select("body").append("svg").attr("width",n*1.5).attr("height",n).style("border","1px solid black"),this.force=d3.layout.force().nodes([]).size([this.width,this.width]).gravity(0).charge(-200).on("tick",function(n){return t.tick(n)}),this.things=this.force.nodes()}return n.prototype.tick=function(n){for(var t,i,r=0;r!=this.things.length;r++)t=this.things[r],t.updatePolar(),t.fixRadius(),t.polar.phi+=(t.quadrant.angle-t.polar.phi)*n.alpha*this.quadrantGravity,t.polar.phi=cap(t.quadrant.angleLower(),t.polar.phi,t.quadrant.angleUpper()),t.polar.r=Math.min(t.polar.r,this.width/2),t.updateXY();i=this.width/2,this.svg.selectAll("circle").attr("cx",function(n){return n.x+i}).attr("cy",function(n){return n.y+i}),this.svg.selectAll("text").attr("x",function(n){return n.x+i}).attr("y",function(n){return n.y+i}).text(function(n){return n.name+" ("+n.goodness().toPrecision(2)+")"})},n.prototype.addThing=function(n){this.things.push(n)},n.prototype.restart=function(){var n=this.svg.selectAll("circle").data(this.things),t=n.enter().append("circle"),i;t.attr("r",10).attr("fill","#3366ff").call(this.force.drag),i=this.svg.selectAll("text").data(this.things).enter().append("text").attr("dx",20).attr("dy",5),this.force.start()},n}();$(function(){for(var n=200,i=[new Thing("C++",Quadrant.Languages,.9,n),new Thing("Scala",Quadrant.Languages,.6,n),new Thing("TypeScript",Quadrant.Languages,.7,n),new Thing("C#",Quadrant.Languages,.1,n),new Thing("APL",Quadrant.Languages,.8,n),new Thing("Continuous Integration",Quadrant.Techniques,.8,n),new Thing("CodeSourcery GCC",Quadrant.Platforms,.5,n),new Thing("NCrunch",Quadrant.Tools,.5,n),new Thing("Git",Quadrant.Tools,.6,n),],r=new Viewport(n*2),t=0;t!=i.length;t++)r.addThing(i[t]);r.restart()})