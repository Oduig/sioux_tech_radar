function random(n,t){var i=t-n;return Math.random()*i+n}function cap(n,t,i){return Math.max(n,Math.min(i,t))}var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},deg45=Math.PI/4,Quadrant=function(){function n(n){this.angle=n}return n.Tools=new n(1*deg45),n.Techniques=new n(3*deg45),n.Platforms=new n(-3*deg45),n.Languages=new n(-1*deg45),n.prototype.angleLower=function(){return this.angle-deg45},n.prototype.angleUpper=function(){return this.angle+deg45},n.prototype.isLeft=function(){return Math.abs(this.angle)<Math.PI/2},n}(),D3Node=function(){function n(n,t){this.x=n,this.y=t}return n}(),D3Link=function(){function n(n,t){this.source=n,this.target=t}return n}(),Thing=function(n){function t(t,i,r){n.call(this,null,null),this.name=t,this.quadrant=i;var u=r*Radar.radius,f=random(i.angleLower(),i.angleUpper());this.polar=new Polar(u,f),this.updateXY()}return __extends(t,n),t.prototype.updatePolar=function(){this.prevPolar=this.polar,this.polar=Polar.fromPoint(this.x,this.y)},t.prototype.fixRadius=function(){this.isBeingDragged()||(this.polar.r=this.prevPolar.r)},t.prototype.updateXY=function(){this.x=this.polar.x(),this.y=this.polar.y()},t.prototype.isBeingDragged=function(){return this.fixed&2},t.prototype.goodness=function(){return this.polar.r/Radar.radius},t}(D3Node),Polar=function(){function n(n,t){this.r=n,this.phi=t}return n.fromPoint=function(t,i){return i=-i,new n(Math.sqrt(t*t+i*i),Math.atan2(i,t))},n.prototype.x=function(){return this.r*Math.cos(this.phi)},n.prototype.y=function(){return-this.r*Math.sin(this.phi)},n}(),Radar=function(){function n(t){var u,r,i;this.width=t,u=this,this.quadrantGravity=.03,r=this.width/2,i=10,this.transformx=d3.scale.linear().domain([-n.radius,n.radius]).range([r,3*r]),this.transformy=d3.scale.linear().domain([-n.radius,n.radius]).range([i,this.width+i]),this.scale=d3.scale.linear().domain([0,n.radius*2]).range([0,this.width]),this.svg=d3.select("body").append("svg").attr("class","radar").attr("width",t*2).attr("height",t+i*2),this.drawBackground(),this.force=d3.layout.force().nodes([]).size([n.radius*2,n.radius*2]).gravity(0).charge(-100).on("tick",function(n){return u.tick(n)}),this.things=this.force.nodes()}return n.radius=200,n.prototype.tick=function(t){for(var r=this,i,f,e,u=0;u!=this.things.length;u++)i=this.things[u],i.updatePolar(),i.fixRadius(),i.polar.phi+=(i.quadrant.angle-i.polar.phi)*t.alpha*this.quadrantGravity,f=10/(i.polar.r+.1),i.polar.phi=cap(i.quadrant.angleLower()+f,i.polar.phi,i.quadrant.angleUpper()-f),i.polar.r=Math.min(i.polar.r,n.radius),i.updateXY();e=this.width/2,this.svg.selectAll("circle.thing").attr("cx",function(n){return r.transformx(n.x)}).attr("cy",function(n){return r.transformy(n.y)}),this.svg.selectAll("text.thing").attr("x",function(n){return r.transformx(n.x)}).attr("y",function(n){return r.transformy(n.y)}).text(function(n){return n.name+" ("+n.goodness().toPrecision(2)+")"})},n.prototype.drawBackground=function(){this.drawLine(0,n.radius*1.1,0,-n.radius*1.1),this.drawLine(n.radius*1.1,0,-n.radius*1.1,0),this.drawCenteredCircle(n.radius*.3),this.drawCenteredCircle(n.radius*.55),this.drawCenteredCircle(n.radius*.8),this.drawCenteredCircle(n.radius*1)},n.prototype.drawLine=function(n,t,i,r){this.svg.append("line").attr("class","lines").attr("x1",this.transformx(n)).attr("y1",this.transformy(t)).attr("x2",this.transformx(i)).attr("y2",this.transformy(r))},n.prototype.drawCenteredCircle=function(n){this.svg.append("circle").attr("class","lines").attr("cx",this.transformx(0)).attr("cy",this.transformy(0)).attr("r",this.scale(n))},n.prototype.addThing=function(n){this.things.push(n)},n.prototype.restart=function(){var n=this.svg.selectAll("circle.thing").data(this.things),t=n.enter().append("circle"),i;t.attr("class","thing").attr("r",6).attr("fill","#3366ff").call(this.force.drag),i=this.svg.selectAll("text.thing").data(this.things).enter().append("text").attr("class","thing").attr("dx",function(n){return(n.quadrant.isLeft()?1:-1)*12}).attr("dy",4).attr("text-anchor",function(n){return n.quadrant.isLeft()?"start":"end"}),this.force.start()},n}();$(function(){for(var t=[new Thing("C++",Quadrant.Languages,.9),new Thing("Scala",Quadrant.Languages,.6),new Thing("TypeScript",Quadrant.Languages,.7),new Thing("C#",Quadrant.Languages,.1),new Thing("APL",Quadrant.Languages,.8),new Thing("Continuous Integration",Quadrant.Techniques,.8),new Thing("CodeSourcery GCC",Quadrant.Platforms,.5),new Thing("NCrunch",Quadrant.Tools,.5),new Thing("Git",Quadrant.Tools,.6),],i=new Radar(400),n=0;n!=t.length;n++)i.addThing(t[n]);i.restart()})