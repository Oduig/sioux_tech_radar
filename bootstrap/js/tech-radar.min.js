function random(n,t){var i=t-n;return Math.random()*i+n}function cap(n,t,i){return Math.max(n,Math.min(i,t))}var Radar=function(){function n(n,t){this.diameter=n,this.quadrant=t;var i=1.1;this.createSvg(i),this.drawBackground(i),this.setupForceLayout()}return n.radius=200,n.quadrantGravity=.03,n.prototype.addThings=function(n){var t=this;n.forEach(function(n){return t.things.push(n)}),this.restart()},n.prototype.createSvg=function(t){var f=d3.select("body").append("svg").attr("class","radar").attr("width",this.diameter*(this.quadrant?1.5:2)).attr("height",this.diameter*(this.quadrant?t:t*2-1));if(this.quadrant)var i=this.diameter/n.radius,r=this.quadrant.isLeft()?n.radius*1.5:0,u=this.quadrant.isTop()?n.radius*t:0;else var i=this.diameter/(n.radius*2),r=n.radius*2,u=n.radius+t;this.svg=f.append("g").attr("transform","scale("+i+") translate("+r+", "+u+")")},n.prototype.drawBackground=function(t){this.drawLabeledCircle("Doen!",.53,n.radius*.4),this.drawLabeledCircle("Proberen",.44,n.radius*.7),this.drawCenteredCircle(n.radius*.85),this.drawLabeledCircle("Experimenteren",.6,n.radius*.86),this.drawLabeledCircle("Afblijven",.3,n.radius*1);var i=n.radius*t;this.drawLine(0,i,0,-i),this.drawLine(i,0,-i,0)},n.prototype.setupForceLayout=function(){var t=this;this.force=d3.layout.force().nodes([]).size([n.radius*2,n.radius*2]).gravity(0).charge(-50).on("tick",function(n){return t.tick(n)}),this.things=this.force.nodes()},n.prototype.restart=function(){var n=this.svg.selectAll("circle.thing").data(this.things),t=n.enter().append("circle"),i;t.attr("class","thing").attr("r",4).call(this.force.drag),i=this.svg.selectAll("text.thing").data(this.things).enter().append("text").attr("class","thing").attr("dx",function(n){return(n.quadrant.isLeft()?-1:1)*12}).attr("dy",4).attr("text-anchor",function(n){return n.quadrant.isLeft()?"end":"start"}).text(function(n){return n.name}),this.force.start()},n.prototype.tick=function(t){this.things.forEach(function(i){i.updatePolar(),i.fixRadius(),i.polar.phi+=(i.quadrant.angle-i.polar.phi)*t.alpha*n.quadrantGravity;var r=10/(i.polar.r+.1);i.polar.phi=cap(i.quadrant.angleLower()+r,i.polar.phi,i.quadrant.angleUpper()-r),i.polar.r=Math.min(i.polar.r,n.radius),i.updateXY()});var i=this.diameter/2;this.svg.selectAll("circle.thing").attr("cx",function(n){return n.x}).attr("cy",function(n){return n.y}),this.svg.selectAll("text.thing").attr("x",function(n){return n.x}).attr("y",function(n){return n.y})},n.prototype.drawLine=function(n,t,i,r){this.svg.append("line").attr("class","lines").attr("x1",n).attr("y1",t).attr("x2",i).attr("y2",r)},n.prototype.drawLabeledCircle=function(t,i,r){this.drawCenteredCircle(r);var f=d3.svg.arc().innerRadius(r-.02*n.radius).outerRadius(r+.02*n.radius).startAngle(0).endAngle(i),u=t.replace(/[^a-z]/,"");this.svg.append("path").attr("d",f).attr("id",u).style("stroke","none").style("fill","white"),this.svg.append("text").append("textPath").attr("xlink:href","#"+u).append("tspan").attr("dy",10).attr("dx",5).text(t)},n.prototype.drawCenteredCircle=function(n){this.svg.append("circle").attr("class","lines").attr("cx",0).attr("cy",0).attr("r",n)},n}()